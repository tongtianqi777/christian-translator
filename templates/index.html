<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TTQ Church Translation (Powered by GPT)</title>
    <style>
    /* Style the input areas */
    .input-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 90vh;
      width: 90vw;
      max-width: 1200px;
      margin: 0 auto;
    }
    .input-container textarea {
      margin: 20px 0;
      padding: 20px;
      border-radius: 5px;
      border: 1px solid gray;
      font-size: 18px;
      width: 90%;
      height: calc(40% - 20px);
      max-height: 80vh;
      box-sizing: border-box;
    }

    #button-area {
      display: inline-block;
    }

    .input-container button {
      margin-top: 0px;
      margin-left: 20px;
      margin-right: 20px;
      padding: 10px 20px;
      border: 1px solid gray;
      border-radius: 5px;
      font-size: 18px;
      background-color: white;
      color: black;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .input-container button:hover {
      background-color: gray;
      color: white;
    }

    /* Style the footer */
    footer {
      text-align: center;
      font-size: 14px;
      color: gray;
      margin-top: 20px;
    }

    /* Style the body */
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #f2f7ff;
    }

    /* Style the title */
    h1 {
      text-align: center;
    }
  </style>
</head>
<body>
<h1>💬 Church Translation (Powered by GPT)</h1>
<div>Using OpenAI gpt-3.5-turbo to translate Christian text | <a href="mailto:tianqitong@outlook.com">Contact TTQ</a> | <a href="https://www.svcae.cc">My Church</a></div>
<div class="input-container">
    <textarea id="input1" placeholder="Put down the input here (在這裏輸入文字)"></textarea>
    <div id="button-area">
        <button id="translateButtonEnglish" onclick="translateText()" data-source-lang="chinese" data-target-lang="english">Translate to English</button>
        <button id="translateButtonChinese" onclick="translateText()" data-source-lang="english" data-target-lang="chinese">Translate to Chinese</button>
    </div>
    <textarea id="input2" placeholder="Translation will show up here (翻譯會出現在這裡)"></textarea>
</div>
<footer></footer>

<script>
    function translateText() {
      let source_lang = event.target.getAttribute('data-source-lang');
      let target_lang = event.target.getAttribute('data-target-lang');

      const input1 = document.getElementById("input1");
      if (input1.value.length > 2000) {
        alert("The max length supported is 2000 chars");
      } else {
        document.getElementById("input2").value = "Translating... (please refresh and try again if the wait is longer than 2min)";

        fetch("/translate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ input: input1.value, source_lang: source_lang, target_lang: target_lang })
        })
        .then(response => response.json())
        .then(data => {
          const input2 = document.getElementById("input2");
          input2.value = data.translation;
        })
        .catch(error => console.error(error));
      }
    }
  </script>
</body>
</html>
